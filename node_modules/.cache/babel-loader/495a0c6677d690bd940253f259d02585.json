{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Input,Pagination}from'antd';import{SearchOutlined}from'@ant-design/icons';import{GetBookList}from'../../api';import Banner from'../../components/Banner';import'./index.css';var Details=/*#__PURE__*/function(_React$Component){_inherits(Details,_React$Component);var _super=_createSuper(Details);function Details(props){var _this;_classCallCheck(this,Details);_this=_super.call(this,props);_this.onSearch=function(value){var _this$state=_this.state,page=_this$state.page,limit=_this$state.limit;GetBookList(page,limit,value).then(function(res){var _res$data=res.data,page=_res$data.page,limit=_res$data.limit,total=_res$data.total,data=_res$data.data;_this.setState({page:page,limit:limit,total:total,bookList:data});});};_this.onShowSizeChange=function(current,pageSize){console.log(current,pageSize);GetBookList(current,pageSize,'').then(function(res){var _res$data2=res.data,page=_res$data2.page,limit=_res$data2.limit,total=_res$data2.total,data=_res$data2.data;_this.setState({page:page,limit:limit,total:total,bookList:data});});};_this.toDetail=function(item){_this.props.history.push({pathname:\"/details/\".concat(item.id),query:{item:item,operation:'take'}});};_this.Mohu=function(){var _this$props$location,_this$props$location2;return/*#__PURE__*/_jsx(Input.Search,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u6A21\\u7CCA\\u68C0\\u7D22\\u5B57\\u6BB5\",allowClear:true,enterButton:\"\\u68C0\\u7D22\",size:\"large\",defaultValue:typeof((_this$props$location=_this.props.location)===null||_this$props$location===void 0?void 0:_this$props$location.query)!==\"undefined\"?(_this$props$location2=_this.props.location)===null||_this$props$location2===void 0?void 0:_this$props$location2.query.searchValue:'',onSearch:_this.onSearch,prefix:/*#__PURE__*/_jsx(SearchOutlined,{})});};_this.state={bookList:[],page:1,limit:10,total:0};return _this;}_createClass(Details,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props$location3,_this2=this;var search='';if(typeof((_this$props$location3=this.props.location)===null||_this$props$location3===void 0?void 0:_this$props$location3.query)!=='undefined'){var _this$props$location4;search=(_this$props$location4=this.props.location)===null||_this$props$location4===void 0?void 0:_this$props$location4.query.searchValue;};var _this$state2=this.state,page=_this$state2.page,limit=_this$state2.limit;GetBookList(page,limit,search).then(function(res){var _res$data3=res.data,page=_res$data3.page,limit=_res$data3.limit,total=_res$data3.total,data=_res$data3.data;if(res.data.code===0){_this2.setState({page:page,limit:limit,total:total,bookList:data});}});}},{key:\"render\",value:function render(){var _this3=this;var _this$state3=this.state,page=_this$state3.page,bookList=_this$state3.bookList,total=_this$state3.total;return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(Banner,{}),/*#__PURE__*/_jsx(\"div\",{className:\"search-background\",children:this.Mohu()}),/*#__PURE__*/_jsx(\"div\",{className:\"search-result-box\",children:bookList.map(function(item){var img=item.img,bookName=item.bookName,author=item.author,publish=item.publish,introduce=item.introduce,id=item.id;return/*#__PURE__*/_jsxs(\"div\",{className:\"search-result\",onClick:function onClick(){return _this3.toDetail(item);},children:[/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-result-item\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u9898  \\u540D\\uFF1A\",bookName]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u4F5C  \\u8005\\uFF1A\",author]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u51FA\\u7248\\u793E\\uFF1A\",publish]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u7B80  \\u4ECB\\uFF1A\",introduce]})]})]},id);})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Pagination,{showSizeChanger:true,onChange:this.onShowSizeChange,defaultCurrent:page,total:total})]});}}]);return Details;}(React.Component);export{Details as default};","map":{"version":3,"sources":["/Users/qiongxiao/Documents/my/projects/library/src/pages/Search/index.js"],"names":["React","Input","Pagination","SearchOutlined","GetBookList","Banner","Details","props","onSearch","value","state","page","limit","then","res","data","total","setState","bookList","onShowSizeChange","current","pageSize","console","log","toDetail","item","history","push","pathname","id","query","operation","Mohu","location","searchValue","search","code","map","img","bookName","author","publish","introduce","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Input, Pagination } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nimport { GetBookList } from '../../api';\nimport Banner from '../../components/Banner';\nimport './index.css';\n\nexport default class Details extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bookList: [],\n      page: 1,\n      limit: 10,\n      total: 0\n    };\n  };\n\n  componentDidMount() {\n    let search = '';\n    if (typeof this.props.location?.query !== 'undefined') {\n      search = this.props.location?.query.searchValue;\n    };\n    const { page, limit } = this.state;\n    GetBookList(page, limit, search).then(res => {\n      const { page, limit, total, data } = res.data;\n      if (res.data.code === 0) {\n        this.setState({\n          page,\n          limit,\n          total,\n          bookList: data,\n        })\n      }\n    });\n  }\n\n\n  onSearch = value => {\n    const { page, limit } = this.state;\n    GetBookList(page, limit, value).then(res => {\n      const { page, limit, total, data } = res.data;\n      this.setState({\n        page,\n        limit,\n        total,\n        bookList: data,\n      })\n    });\n  }\n\n  onShowSizeChange = (current, pageSize) => {\n    console.log(current, pageSize);\n    GetBookList(current, pageSize, '').then(res => {\n      const { page, limit, total, data } = res.data;\n      this.setState({\n        page,\n        limit,\n        total,\n        bookList: data,\n      })\n    });\n  }\n\n  toDetail = (item) => {\n    this.props.history.push({ pathname: `/details/${item.id}`, query: {item,operation:'take'} });\n  }\n\n  Mohu = () => {\n    return (\n      <Input.Search\n        placeholder=\"请输入模糊检索字段\"\n        allowClear\n        enterButton=\"检索\"\n        size=\"large\"\n        defaultValue={typeof this.props.location?.query !== \"undefined\" ? this.props.location?.query.searchValue : ''}\n        onSearch={this.onSearch}\n        prefix={<SearchOutlined />}\n      />\n    )\n  }\n\n  render() {\n    const { page, bookList, total } = this.state;\n    return (\n      <div className=\"home\">\n        <Banner />\n        <div className=\"search-background\">\n          {this.Mohu()}\n        </div>\n\n        <div className=\"search-result-box\">\n          {\n            bookList.map(item => {\n              const { img, bookName, author, publish, introduce, id } = item;\n              return (\n                <div className=\"search-result\" key={id} onClick={() => this.toDetail(item)}>\n                  <img src={img} alt='' />\n                  <div className=\"search-result-item\">\n                    <div>题  名：{bookName}</div>\n                    <div>作  者：{author}</div>\n                    <div>出版社：{publish}</div>\n                    <div>简  介：{introduce}</div>\n                  </div>\n                </div>\n              );\n            })\n          }\n        </div>\n        <br /><br />\n        <Pagination\n          showSizeChanger\n          onChange={this.onShowSizeChange}\n          defaultCurrent={page}\n          total={total}\n        />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}