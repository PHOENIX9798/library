{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Row,Col,Button,message}from'antd';import{TakeBook,BackBook}from'../../api';import Banner from'../../components/Banner';import'./index.css';var Details=/*#__PURE__*/function(_React$Component){_inherits(Details,_React$Component);var _super=_createSuper(Details);function Details(props){var _this;_classCallCheck(this,Details);_this=_super.call(this,props);_this.takeBook=function(bookId){var userId=window.localStorage.userId;if(!userId){message.error(\"请先登录\");}else{TakeBook({bookId:bookId,userId:userId}).then(function(res){if(res.data.code===0){if(res.data.msg){message.error(res.data.msg);return;}message.success(\"借书成功，请到个人中心查看哦\");}});}};_this.backBook=function(bookId){var userId=window.localStorage.userId;if(!userId){message.error(\"请先登录\");}else{BackBook({bookId:bookId,userId:userId}).then(function(res){if(res.data.code===0){if(res.data.msg){message.error(res.data.msg);return;}message.success(\"还书成功\");}});}};_this.state={bookInfo:{}};return _this;}_createClass(Details,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props$location,_this$props$location2;console.log((_this$props$location=this.props.location)===null||_this$props$location===void 0?void 0:_this$props$location.query);if(typeof((_this$props$location2=this.props.location)===null||_this$props$location2===void 0?void 0:_this$props$location2.query)!=='undefined'){var _this$props$location3;this.setState({bookInfo:(_this$props$location3=this.props.location)===null||_this$props$location3===void 0?void 0:_this$props$location3.query.item});}}},{key:\"render\",value:function render(){var _this$props$location4,_this2=this;var _this$state$bookInfo=this.state.bookInfo,bookId=_this$state$bookInfo.bookId,author=_this$state$bookInfo.author,img=_this$state$bookInfo.img,introduce=_this$state$bookInfo.introduce,publish=_this$state$bookInfo.publish,bookName=_this$state$bookInfo.bookName,num=_this$state$bookInfo.num;return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(Banner,{}),/*#__PURE__*/_jsx(\"div\",{className:\"details-background\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{span:6,children:[/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"\"}),((_this$props$location4=this.props.location)===null||_this$props$location4===void 0?void 0:_this$props$location4.query.operation)==='take'?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return _this2.takeBook(bookId);},children:\"\\u501F\\u9605\"})}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return _this2.backBook(bookId);},children:\"\\u5F52\\u8FD8\"})})]}),/*#__PURE__*/_jsxs(Col,{span:18,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u7D22\\u4E66\\u53F7\\uFF1A\",bookId]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u4E66\\u540D\\uFF1A\",bookName]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u4F5C\\u8005\\uFF1A\",author]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u7B80\\u4ECB\\uFF1A\",introduce]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u51FA\\u7248\\u793E\\uFF1A\",publish]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u5E93\\u5B58\\uFF1A\",num]})]})]})})]});}}]);return Details;}(React.Component);export{Details as default};","map":{"version":3,"sources":["/Users/qiongxiao/Documents/my/projects/library/src/pages/Details/index.js"],"names":["React","Row","Col","Button","message","TakeBook","BackBook","Banner","Details","props","takeBook","bookId","userId","window","localStorage","error","then","res","data","code","msg","success","backBook","state","bookInfo","console","log","location","query","setState","item","author","img","introduce","publish","bookName","num","operation","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Row, Col, Button, message } from 'antd';\nimport { TakeBook, BackBook } from '../../api'\nimport Banner from '../../components/Banner'\nimport './index.css';\n\nexport default class Details extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bookInfo: {},\n    };\n  };\n\n  componentDidMount() {\n    console.log(this.props.location?.query);\n    if (typeof this.props.location?.query !== 'undefined') {\n      this.setState({\n        bookInfo: this.props.location?.query.item,\n      });\n    }\n  }\n  takeBook = (bookId) => {\n    const { userId } = window.localStorage;\n    if (!userId) {\n      message.error(\"请先登录\");\n    } else {\n      TakeBook({ bookId, userId }).then(res => {\n        if (res.data.code === 0) {\n          if(res.data.msg){\n            message.error(res.data.msg);\n            return;\n          }\n          message.success(\"借书成功，请到个人中心查看哦\");\n        }\n      })\n    }\n  }\n\n  backBook = (bookId) => {\n    const { userId } = window.localStorage;\n    if (!userId) {\n      message.error(\"请先登录\");\n    } else {\n      BackBook({ bookId, userId }).then(res => {\n        if (res.data.code === 0) {\n          if(res.data.msg){\n            message.error(res.data.msg);\n            return;\n          }\n          message.success(\"还书成功\");\n        }\n      })\n    }\n  }\n\n  render() {\n    const { bookId, author, img, introduce, publish, bookName, num } = this.state.bookInfo;\n    return (\n      <div className=\"home\">\n        <Banner />\n        <div className=\"details-background\">\n          <Row>\n            <Col span={6}>\n              <img src={img} alt='' />\n              {\n                this.props.location?.query.operation === 'take' ?\n                  <div><Button onClick={() => this.takeBook(bookId)}>借阅</Button></div>\n                  :\n                  <div><Button onClick={() => this.backBook(bookId)}>归还</Button></div>\n              }\n            </Col>\n            <Col span={18}>\n              <div>索书号：{bookId}</div>\n              <div>书名：{bookName}</div>\n              <div>作者：{author}</div>\n              <div>简介：{introduce}</div>\n              <div>出版社：{publish}</div>\n              <div>库存：{num}</div>\n            </Col>\n          </Row>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}