{"ast":null,"code":"import _objectSpread from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Form,Card,Button,Input,message}from\"antd\";import{ToLogin,SignIn}from'../../api';import Banner from'../../components/Banner';import\"./index.css\";var layout={labelCol:{span:6},wrapperCol:{span:16}};var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.onFinish=function(values){ToLogin(values).then(function(res){console.log(res);if(res.data.userData.id){window.localStorage.userId=res.data.userData.userId;message.success('登录成功');_this.props.history.push('/');}else{message.error(res.data.userData.msg);}});};_this.onFinishFailed=function(){message.error('登录失败');};_this.toggleLogin=function(){_this.setState({isLogin:!_this.state.isLogin});};_this.login=function(){};_this.state={isLogin:true};return _this;}// 提交表单且数据验证成功后回调事件\n_createClass(Login,[{key:\"render\",value:function render(){var isLogin=this.state.isLogin;return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(Banner,{}),/*#__PURE__*/_jsx(\"div\",{className:\"login-box\",children:/*#__PURE__*/_jsx(Card,{title:\"\\u767B\\u9646\\u9875\\u9762\",extra:/*#__PURE__*/_jsx(Button,{href:\"#\",style:{display:isLogin?\"none\":\"block\"},onClick:this.toggleLogin,children:\"\\u8FD4\\u56DE\\u767B\\u5F55\"}),children:/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},layout),{},{name:\"basic\",initialValues:{remember:true},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,children:[/*#__PURE__*/_jsx(Form.Item,{label:\"\\u8D26\\u53F7\",name:\"userId\",rules:[{required:true,message:\"请输入账号\"}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u5BC6\\u7801\",name:\"password\",rules:[{required:true,message:\"请输入密码\"}],children:/*#__PURE__*/_jsx(Input.Password,{})}),!isLogin&&/*#__PURE__*/_jsx(Form.Item,{label:\"\\u786E\\u8BA4\\u5BC6\\u7801\",name:\"checkPassword\",rules:[{required:true,message:\"请确认密码\"}],children:/*#__PURE__*/_jsx(Input.Password,{})}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",onClick:this.login,children:\"\\u767B\\u9646\"}),\"\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",onClick:this.toggleLogin,children:\"\\u6CE8\\u518C\"})]}))})})]});}}]);return Login;}(React.Component);export{Login as default};;","map":{"version":3,"sources":["/Users/qiongxiao/Documents/my/projects/library/src/pages/Login/index.js"],"names":["React","Form","Card","Button","Input","message","ToLogin","SignIn","Banner","layout","labelCol","span","wrapperCol","Login","props","onFinish","values","then","res","console","log","data","userData","id","window","localStorage","userId","success","history","push","error","msg","onFinishFailed","toggleLogin","setState","isLogin","state","login","display","remember","required","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Form, Card, Button, Input, message } from \"antd\";\nimport { ToLogin, SignIn } from '../../api'\nimport Banner from '../../components/Banner';\nimport \"./index.css\";\n\nconst layout = {\n  labelCol: {\n    span: 6,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nexport default class Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLogin: true,\n    };\n  }\n  // 提交表单且数据验证成功后回调事件\n  onFinish = (values) => {\n    ToLogin(values).then(res => {\n      console.log(res)\n      if (res.data.userData.id) {\n        window.localStorage.userId = res.data.userData.userId;\n        message.success('登录成功');\n        this.props.history.push('/');\n      } else {\n        message.error(res.data.userData.msg);\n      }\n    })\n  };\n  // 提交表单且数据验证失败后回调事件\n  onFinishFailed = () => {\n    message.error('登录失败');\n  };\n\n  toggleLogin = () => {\n    this.setState({\n      isLogin: !this.state.isLogin,\n    })\n  };\n\n  login = () => {\n\n  }\n\n  render() {\n    const { isLogin } = this.state;\n    return (\n      <div className=\"home\">\n        <Banner />\n        <div className=\"login-box\">\n          <Card\n            title=\"登陆页面\"\n            extra={<Button href=\"#\" style={{ display: isLogin ? \"none\" : \"block\" }} onClick={this.toggleLogin}>返回登录</Button>}\n          >\n            <Form\n              {...layout}\n              name=\"basic\"\n              initialValues={{\n                remember: true,\n              }}\n              onFinish={this.onFinish}\n              onFinishFailed={this.onFinishFailed}\n            >\n              <Form.Item\n                label=\"账号\"\n                name=\"userId\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"请输入账号\",\n                  },\n                ]}\n              >\n                <Input />\n              </Form.Item>\n\n              <Form.Item\n                label=\"密码\"\n                name=\"password\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"请输入密码\",\n                  },\n                ]}\n              >\n                <Input.Password />\n              </Form.Item>\n              {\n                !isLogin && (\n                  <Form.Item\n                    label=\"确认密码\"\n                    name=\"checkPassword\"\n                    rules={[\n                      {\n                        required: true,\n                        message: \"请确认密码\",\n                      },\n                    ]}\n                  >\n                    <Input.Password />\n                  </Form.Item>\n                )\n              }\n              <Button type=\"primary\" htmlType=\"submit\" onClick={this.login}>\n                登陆\n              </Button>&nbsp;&nbsp;&nbsp;&nbsp;\n                <Button type=\"primary\" htmlType=\"submit\" onClick={this.toggleLogin}>\n                注册\n              </Button>\n            </Form>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n};\n\n"]},"metadata":{},"sourceType":"module"}