{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Button,Affix}from'antd';import{GetMyBooks}from'../../api';import Banner from'../../components/Banner';import'./index.css';var MyCenter=/*#__PURE__*/function(_React$Component){_inherits(MyCenter,_React$Component);var _super=_createSuper(MyCenter);function MyCenter(props){var _this;_classCallCheck(this,MyCenter);_this=_super.call(this,props);_this.toDetail=function(item){_this.props.history.push({pathname:\"/details/\".concat(item.id),query:{item:item,operation:'back'}});};_this.toAdmin=function(){_this.props.history.push('/admin');};_this.state={myBooksList:[]};return _this;}_createClass(MyCenter,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;GetMyBooks(window.localStorage.userId).then(function(res){if(res.data.code===0){_this2.setState({myBooksList:res.data.data});}});}},{key:\"render\",value:function render(){var _this3=this;var myBooksList=this.state.myBooksList;return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(Banner,{}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u6211\\u501F\\u5230\\u7684\\u4E66\"}),/*#__PURE__*/_jsx(\"div\",{className:\"search-result-box\",children:myBooksList.length>0&&myBooksList.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"search-result\",onClick:function onClick(){return _this3.toDetail(item);},children:[/*#__PURE__*/_jsx(\"img\",{src:item.img,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-result-item\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u9898\\u540D\\uFF1A\",item.bookName]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u4F5C\\u8005\\uFF1A\",item.author]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u51FA\\u7248\\u793E\\uFF1A\",item.publish]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u7B80\\u4ECB\\uFF1A\",item.introduce]})]})]},item.bookId);})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Affix,{offsetTop:\"top\",children:/*#__PURE__*/_jsx(Button,{type:\"dashed\",onClick:this.toAdmin,ghost:true,children:\"\\u7BA1\\u7406\"})})]});}}]);return MyCenter;}(React.Component);export{MyCenter as default};","map":{"version":3,"sources":["/Users/qiongxiao/Documents/my/projects/library/src/pages/MyCenter/index.js"],"names":["React","Button","Affix","GetMyBooks","Banner","MyCenter","props","toDetail","item","history","push","pathname","id","query","operation","toAdmin","state","myBooksList","window","localStorage","userId","then","res","data","code","setState","length","map","img","bookName","author","publish","introduce","bookId","Component"],"mappings":"4tBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,KAAjB,KAA8B,MAA9B,CACA,OAASC,UAAT,KAA2B,WAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,MAAO,aAAP,C,GAEqBC,CAAAA,Q,gHACnB,kBAAYC,KAAZ,CAAmB,0CACjB,uBAAMA,KAAN,EADiB,MAgBnBC,QAhBmB,CAgBR,SAACC,IAAD,CAAU,CACnB,MAAKF,KAAL,CAAWG,OAAX,CAAmBC,IAAnB,CAAwB,CAAEC,QAAQ,oBAAcH,IAAI,CAACI,EAAnB,CAAV,CAAmCC,KAAK,CAAE,CAAEL,IAAI,CAAJA,IAAF,CAAQM,SAAS,CAAE,MAAnB,CAA1C,CAAxB,EACD,CAlBkB,OAoBnBC,OApBmB,CAoBT,UAAM,CACd,MAAKT,KAAL,CAAWG,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EACD,CAtBkB,CAEjB,MAAKM,KAAL,CAAa,CACXC,WAAW,CAAE,EADF,CAAb,CAFiB,aAKlB,C,kFACmB,iBAClBd,UAAU,CAACe,MAAM,CAACC,YAAP,CAAoBC,MAArB,CAAV,CAAuCC,IAAvC,CAA4C,SAAAC,GAAG,CAAI,CACjD,GAAIA,GAAG,CAACC,IAAJ,CAASC,IAAT,GAAkB,CAAtB,CAAyB,CACvB,MAAI,CAACC,QAAL,CAAc,CACZR,WAAW,CAAEK,GAAG,CAACC,IAAJ,CAASA,IADV,CAAd,EAGD,CACF,CAND,EAOD,C,uCAUQ,oBACCN,CAAAA,WADD,CACiB,KAAKD,KADtB,CACCC,WADD,CAEP,mBACE,aAAK,SAAS,CAAC,MAAf,wBACE,KAAC,MAAD,IADF,cAEE,sDAFF,cAGE,YAAK,SAAS,CAAC,mBAAf,UAEIA,WAAW,CAACS,MAAZ,CAAqB,CAArB,EAA0BT,WAAW,CAACU,GAAZ,CAAgB,SAAAnB,IAAI,CAAI,CAChD,mBACE,aAAK,SAAS,CAAC,eAAf,CAAiD,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACD,QAAL,CAAcC,IAAd,CAAN,EAA1D,wBACE,YAAK,GAAG,CAAEA,IAAI,CAACoB,GAAf,CAAoB,GAAG,CAAC,EAAxB,EADF,cAEE,aAAK,SAAS,CAAC,oBAAf,wBACE,4CAASpB,IAAI,CAACqB,QAAd,GADF,cAEE,4CAASrB,IAAI,CAACsB,MAAd,GAFF,cAGE,kDAAUtB,IAAI,CAACuB,OAAf,GAHF,cAIE,4CAASvB,IAAI,CAACwB,SAAd,GAJF,GAFF,GAAoCxB,IAAI,CAACyB,MAAzC,CADF,CAUD,CAXyB,CAF9B,EAHF,cAmBE,aAnBF,cAmBQ,aAnBR,cAoBE,KAAC,KAAD,EAAO,SAAS,CAAC,KAAjB,uBACE,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAE,KAAKlB,OAApC,CAA6C,KAAK,KAAlD,0BADF,EApBF,GADF,CA4BD,C,sBAvDmCf,KAAK,CAACkC,S,SAAvB7B,Q","sourcesContent":["import React from 'react';\nimport { Button, Affix } from 'antd';\nimport { GetMyBooks } from '../../api';\nimport Banner from '../../components/Banner'\nimport './index.css';\n\nexport default class MyCenter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      myBooksList: []\n    }\n  }\n  componentDidMount() {\n    GetMyBooks(window.localStorage.userId).then(res => {\n      if (res.data.code === 0) {\n        this.setState({\n          myBooksList: res.data.data,\n        })\n      }\n    })\n  };\n\n  toDetail = (item) => {\n    this.props.history.push({ pathname: `/details/${item.id}`, query: { item, operation: 'back' } });\n  }\n\n  toAdmin = () => {\n    this.props.history.push('/admin');\n  }\n\n  render() {\n    const { myBooksList } = this.state;\n    return (\n      <div className=\"home\">\n        <Banner />\n        <h2>我借到的书</h2>\n        <div className=\"search-result-box\">\n          {\n            myBooksList.length > 0 && myBooksList.map(item => {\n              return (\n                <div className=\"search-result\" key={item.bookId} onClick={() => this.toDetail(item)}>\n                  <img src={item.img} alt='' />\n                  <div className=\"search-result-item\">\n                    <div>题名：{item.bookName}</div>\n                    <div>作者：{item.author}</div>\n                    <div>出版社：{item.publish}</div>\n                    <div>简介：{item.introduce}</div>\n                  </div>\n                </div>)\n            })\n          }\n        </div>\n        <br /><br />\n        <Affix offsetTop=\"top\">\n          <Button type=\"dashed\" onClick={this.toAdmin} ghost>\n            管理\n        </Button>\n        </Affix>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}