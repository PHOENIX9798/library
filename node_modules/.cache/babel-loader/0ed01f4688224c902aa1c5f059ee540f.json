{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/qiongxiao/Documents/my/projects/library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Button,Input,Pagination,Form,Space,Select}from'antd';import{SearchOutlined,MinusCircleOutlined,PlusOutlined}from'@ant-design/icons';import{GetBookList}from'../../api';import Banner from'../../components/Banner';import'./index.css';var Option=Select.Option;var condition=[{label:'与',value:'and'},{label:'或',value:'or'}];var category=[{label:'任意字段',value:'arbitrary'},{label:'题名',value:'theme'},{label:'作者',value:'author'}];var Details=/*#__PURE__*/function(_React$Component){_inherits(Details,_React$Component);var _super=_createSuper(Details);function Details(props){var _this;_classCallCheck(this,Details);_this=_super.call(this,props);_this.onSearch=function(value){var _this$state=_this.state,page=_this$state.page,limit=_this$state.limit;GetBookList(page,limit,value).then(function(res){var _res$data=res.data,page=_res$data.page,limit=_res$data.limit,total=_res$data.total,data=_res$data.data;if(res.code===0){_this.setState({page:page,limit:limit,total:total,bookList:data});}});};_this.onShowSizeChange=function(current,pageSize){console.log(current,pageSize);};_this.toDetail=function(item){_this.props.history.push({pathname:\"/details/\".concat(item.id),query:item});};_this.Mohu=function(){var searchValue=_this.state.searchValue;return/*#__PURE__*/_jsx(Input.Search,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u6A21\\u7CCA\\u68C0\\u7D22\\u5B57\\u6BB5\",allowClear:true,enterButton:\"\\u68C0\\u7D22\",size:\"large\",defaultValue:searchValue,onSearch:_this.onSearch,prefix:/*#__PURE__*/_jsx(SearchOutlined,{})});};_this.state={bookList:[],page:1,limit:10,total:0,searchValue:''};return _this;}_createClass(Details,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props$location,_this2=this;var _this$state2=this.state,page=_this$state2.page,limit=_this$state2.limit,searchValue=_this$state2.searchValue;if(typeof((_this$props$location=this.props.location)===null||_this$props$location===void 0?void 0:_this$props$location.query)!=='undefined'){var _this$props$location2;this.setState({searchValue:(_this$props$location2=this.props.location)===null||_this$props$location2===void 0?void 0:_this$props$location2.query.searchValue});}GetBookList(page,limit,searchValue).then(function(res){var _res$data2=res.data,page=_res$data2.page,limit=_res$data2.limit,total=_res$data2.total,data=_res$data2.data;if(res.data.code===0){_this2.setState({page:page,limit:limit,total:total,bookList:data});}});}// onFinish = values => {\n//   console.log('Received values of form:', values);\n// };\n},{key:\"render\",// Gaoji = () => {\n//   return (\n//     <Form name=\"dynamic_form_nest_item\" onFinish={this.onFinish} autoComplete=\"off\">\n//       <Form.List name=\"users\">\n//         {(fields, { add, remove }) => (\n//           <>\n//             {fields.map(field => (\n//               <Space key={field.key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\n//                 <Form.Item\n//                   {...field}\n//                   name={[field.name, 'first']}\n//                   fieldKey={[field.fieldKey, 'first']}\n//                   rules={[{ required: true, message: 'Missing first name' }]}\n//                 >\n//                   <Select style={{ width: 100 }} size=\"large\" defaultValue=\"and\">\n//                     {condition.map(item => (\n//                       <Option key={item.value} value={item.value}>\n//                         {item.label}\n//                       </Option>\n//                     ))}\n//                   </Select>\n//                 </Form.Item>\n//                 <Form.Item\n//                   {...field}\n//                   name={[field.name, 'first']}\n//                   fieldKey={[field.fieldKey, 'first']}\n//                   rules={[{ required: true, message: 'Missing first name' }]}\n//                 >\n//                   <Select style={{ width: 150 }} size=\"large\" defaultValue=\"arbitrary\">\n//                     {category.map(item => (\n//                       <Option key={item.value} value={item.value}>\n//                         {item.label}\n//                       </Option>\n//                     ))}\n//                   </Select>\n//                 </Form.Item>\n//                 <Form.Item\n//                   {...field}\n//                   name={[field.name, 'last']}\n//                   fieldKey={[field.fieldKey, 'last']}\n//                   rules={[{ required: true, message: 'Missing last name' }]}\n//                 >\n//                   <Input placeholder=\"输入查询\" style={{ width: 600 }} size=\"large\" />\n//                 </Form.Item>\n//                 <MinusCircleOutlined onClick={() => remove(field.name)} />\n//               </Space>\n//             ))}\n//             <Form.Item>\n//               <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />} size=\"large\">\n//                 添加新行\n//             </Button>\n//             </Form.Item>\n//           </>\n//         )}\n//       </Form.List>\n//       <Form.Item>\n//         <Button type=\"primary\" htmlType=\"submit\" size=\"large\">\n//           查询\n//       </Button>\n//       </Form.Item>\n//     </Form>\n//   )\n// }\nvalue:function render(){var _this3=this;var _this$state3=this.state,page=_this$state3.page,bookList=_this$state3.bookList,total=_this$state3.total;return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(Banner,{}),/*#__PURE__*/_jsx(\"div\",{className:\"search-background\",children:this.Mohu()}),/*#__PURE__*/_jsx(\"div\",{className:\"search-result-box\",children:bookList.map(function(item){var img=item.img,bookName=item.bookName,author=item.author,publish=item.publish,introduce=item.introduce,id=item.id;return/*#__PURE__*/_jsxs(\"div\",{className:\"search-result\",onClick:function onClick(){return _this3.toDetail(item);},children:[/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-result-item\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u9898  \\u540D\\uFF1A\",bookName]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u4F5C  \\u8005\\uFF1A\",author]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u51FA\\u7248\\u793E\\uFF1A\",publish]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u7B80  \\u4ECB\\uFF1A\",introduce]})]})]},id);})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Pagination,{showSizeChanger:true,onShowSizeChange:this.onShowSizeChange,defaultCurrent:page,total:total})]});}}]);return Details;}(React.Component);export{Details as default};","map":{"version":3,"sources":["/Users/qiongxiao/Documents/my/projects/library/src/pages/Search/index.js"],"names":["React","Button","Input","Pagination","Form","Space","Select","SearchOutlined","MinusCircleOutlined","PlusOutlined","GetBookList","Banner","Option","condition","label","value","category","Details","props","onSearch","state","page","limit","then","res","data","total","code","setState","bookList","onShowSizeChange","current","pageSize","console","log","toDetail","item","history","push","pathname","id","query","Mohu","searchValue","location","map","img","bookName","author","publish","introduce","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button, Input, Pagination, Form, Space, Select } from 'antd';\nimport { SearchOutlined, MinusCircleOutlined, PlusOutlined } from '@ant-design/icons';\nimport { GetBookList } from '../../api';\nimport Banner from '../../components/Banner';\nimport './index.css';\n\nconst { Option } = Select;\n\nconst condition = [{ label: '与', value: 'and' }, { label: '或', value: 'or' }];\nconst category = [{ label: '任意字段', value: 'arbitrary' }, { label: '题名', value: 'theme' }, { label: '作者', value: 'author' }];\n\nexport default class Details extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bookList: [],\n      page: 1,\n      limit: 10,\n      total: 0,\n      searchValue: ''\n    };\n  };\n\n  componentDidMount() {\n    const { page, limit, searchValue } = this.state;\n    if (typeof this.props.location?.query !== 'undefined') {\n      this.setState({\n        searchValue: this.props.location?.query.searchValue,\n      });\n    }\n    GetBookList(page, limit, searchValue).then(res => {\n      const { page, limit, total, data } = res.data;\n      if (res.data.code === 0) {\n        this.setState({\n          page,\n          limit,\n          total,\n          bookList: data,\n        })\n      }\n    });\n  }\n\n  // onFinish = values => {\n  //   console.log('Received values of form:', values);\n  // };\n\n  onSearch = value => {\n    const { page, limit } = this.state;\n    GetBookList(page, limit, value).then(res => {\n      const { page, limit, total, data } = res.data;\n      if (res.code === 0) {\n        this.setState({\n          page,\n          limit,\n          total,\n          bookList: data,\n        })\n      }\n    });\n  }\n\n  onShowSizeChange = (current, pageSize) => {\n    console.log(current, pageSize);\n  }\n\n  toDetail=(item)=> {\n    this.props.history.push({ pathname: `/details/${item.id}`, query: item });\n  }\n\n  Mohu = () => {\n    const { searchValue } = this.state;\n    return (\n      <Input.Search\n        placeholder=\"请输入模糊检索字段\"\n        allowClear\n        enterButton=\"检索\"\n        size=\"large\"\n        defaultValue={searchValue}\n        onSearch={this.onSearch}\n        prefix={<SearchOutlined />}\n      />\n    )\n  }\n\n  // Gaoji = () => {\n  //   return (\n  //     <Form name=\"dynamic_form_nest_item\" onFinish={this.onFinish} autoComplete=\"off\">\n  //       <Form.List name=\"users\">\n  //         {(fields, { add, remove }) => (\n  //           <>\n  //             {fields.map(field => (\n  //               <Space key={field.key} style={{ display: 'flex', marginBottom: 8 }} align=\"baseline\">\n  //                 <Form.Item\n  //                   {...field}\n  //                   name={[field.name, 'first']}\n  //                   fieldKey={[field.fieldKey, 'first']}\n  //                   rules={[{ required: true, message: 'Missing first name' }]}\n  //                 >\n  //                   <Select style={{ width: 100 }} size=\"large\" defaultValue=\"and\">\n  //                     {condition.map(item => (\n  //                       <Option key={item.value} value={item.value}>\n  //                         {item.label}\n  //                       </Option>\n  //                     ))}\n  //                   </Select>\n  //                 </Form.Item>\n\n  //                 <Form.Item\n  //                   {...field}\n  //                   name={[field.name, 'first']}\n  //                   fieldKey={[field.fieldKey, 'first']}\n  //                   rules={[{ required: true, message: 'Missing first name' }]}\n  //                 >\n  //                   <Select style={{ width: 150 }} size=\"large\" defaultValue=\"arbitrary\">\n  //                     {category.map(item => (\n  //                       <Option key={item.value} value={item.value}>\n  //                         {item.label}\n  //                       </Option>\n  //                     ))}\n  //                   </Select>\n  //                 </Form.Item>\n\n  //                 <Form.Item\n  //                   {...field}\n  //                   name={[field.name, 'last']}\n  //                   fieldKey={[field.fieldKey, 'last']}\n  //                   rules={[{ required: true, message: 'Missing last name' }]}\n  //                 >\n  //                   <Input placeholder=\"输入查询\" style={{ width: 600 }} size=\"large\" />\n  //                 </Form.Item>\n  //                 <MinusCircleOutlined onClick={() => remove(field.name)} />\n  //               </Space>\n  //             ))}\n  //             <Form.Item>\n  //               <Button type=\"dashed\" onClick={() => add()} block icon={<PlusOutlined />} size=\"large\">\n  //                 添加新行\n  //             </Button>\n  //             </Form.Item>\n  //           </>\n  //         )}\n  //       </Form.List>\n  //       <Form.Item>\n  //         <Button type=\"primary\" htmlType=\"submit\" size=\"large\">\n  //           查询\n  //       </Button>\n  //       </Form.Item>\n  //     </Form>\n  //   )\n  // }\n\n  render() {\n    const { page, bookList, total } = this.state;\n    return (\n      <div className=\"home\">\n        <Banner />\n        <div className=\"search-background\">\n          {this.Mohu()}\n          {/* <Gaoji /> */}\n          {/* <br /><br />\n        <Button size=\"large\">切换高级检索</Button> */}\n        </div>\n\n        <div className=\"search-result-box\">\n          {\n            bookList.map(item => {\n              const { img, bookName, author, publish, introduce, id } = item;\n              return (\n                <div className=\"search-result\" key={id} onClick={()=>this.toDetail(item)}>\n                  <img src={img} alt='' />\n                  <div className=\"search-result-item\">\n                    <div>题  名：{bookName}</div>\n                    <div>作  者：{author}</div>\n                    <div>出版社：{publish}</div>\n                    <div>简  介：{introduce}</div>\n                  </div>\n                </div>\n              );\n            })\n          }\n        </div>\n        <br /><br />\n        <Pagination\n          showSizeChanger\n          onShowSizeChange={this.onShowSizeChange}\n          defaultCurrent={page}\n          total={total}\n        />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}